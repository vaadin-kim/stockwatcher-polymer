<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/neon-animation/animations/slide-from-bottom-animation.html">
<link rel="import" href="../bower_components/neon-animation/animations/slide-down-animation.html">
<link rel="import" href="../bower_components/google-feeds/google-feeds.html">
<link rel="import" href="../bower_components/paper-progress/paper-progress.html">

<dom-module id="sw-stock-details">

    <!-- Defines the element's style and local DOM -->
    <template>
        <style>
            paper-dialog {
                width: 100%;
                height: 95%;
                max-width: 800px;
                margin: 0;
                display: flex;
                flex-direction: column;
            }

            .header {
                background-color: #0a589b;
                margin: 0px !important;
                padding: 18px !important;
                color: #ffffff;
            }

            .header paper-button {
                position: absolute;
                right: 10px;
                top: 10px;
            }

            .feed {
                flex: 1;
                width: 100%;
                height: 100%;
                padding: 10px 10px 0px 10px;
                box-sizing: border-box;
                overflow-y: auto;
                margin-bottom: 0px !important;
            }

            .feed-item {
                float: left;
                height: 70px;
                width: 100%;
                border-bottom: dotted 1px #555555;
                padding: 5px 10px;
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
            }

            .feed-item a {
                text-decoration: none;
                color: #000000;
            }

            .feed-item .title {
                flex: 2;
                overflow: hidden;
            }

            .feed-item .pubDate {
                color: #999999;
                font-size: 11px;
                flex: 1;
            }

            #progress {
                width: 100%;
                --paper-progress-active-color: #2778bd;
            }

            @media (min-width: 421px) {
                .feed-item {
                    width: 50%;
                }

                .feed-item:nth-child(odd) {
                    border-right: dotted 1px #555555;
                }
            }
        </style>
        <paper-dialog modal id="dialog" verticalOffset="25" entry-animation="slide-from-bottom-animation"
                      exit-animation="slide-up-animation">

            <div class="header">
                <h2>Apple Inc</h2>
                <paper-button dialog-dismiss>Close</paper-button>
            </div>
            <template is="dom-if" if="{{loading}}">
                <paper-progress id="progress" indeterminate></paper-progress>
            </template>
            <google-feeds feed='http://finance.yahoo.com/rss/headline?s=aapl'
                          results='{{result}}' loading="{{loading}}"
                          id="feed"></google-feeds>


            <div class="feed">
                <template is="dom-repeat" items="{{result.entries}}">
                    <div class="feed-item">
                        <div class="title"><a href="{{item.link}}" target="_blank">{{item.title}}</a></div>
                        <div class="pubDate">{{item.publishedDate}}</div>
                    </div>
                </template>
            </div>
        </paper-dialog>
    </template>

    <!-- Creates the element's prototype and registers it -->
    <script>
        Polymer({
            is: 'sw-stock-details'

        });
    </script>

</dom-module>